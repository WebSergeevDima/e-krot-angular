<div class="report__header-block">
    <div class="report__header">

        <div class="report__header-title">
            <div class="report__header-title-mark">{{report['titleMark']}} {{report['titleModel']}}
            </div>
            <div class="report__header-location">
                {{report['dateCreate'] | date:'dd.MM.yyy' + ' | ' + report['location']}}</div>
        </div>


    </div>

    <div class="report__header-price">
        {{report['price'] || report['priceAvg']| number:'':'en'}} {{cur}}
    </div>
</div>

<section *ngIf="report['price']; else reportAutoMarket">

    <div class="grid grid_column-3">
        <div>
            <div>Марка: <strong>{{report['titleMark']}}</strong></div>
            <div>Модель: <strong>{{report['titleModel']}}</strong></div>
            <div>Год выпуска: <strong>{{report['year']}}</strong></div>
        </div>
        <div>
            <div>Тип кузова: <strong>{{report['bodyType']}}</strong></div>
            <div>Пробег: <strong>{{report['mileage']}}</strong> км</div>
            <div>Тип топлива: <strong>{{report['fuel']}}</strong></div>
        </div>
        <div>
            <div>Объем двигателя: <strong>{{report['valume']}}</strong> л.</div>
            <div>Трансмиссия: <strong>{{report['transmission']}}</strong></div>
            <div>Привод: <strong>{{report['gear']}}</strong></div>
        </div>
    </div>

    <mat-divider class="divider"></mat-divider>

    <div>Стоимость вашего автомобиля <strong>{{report['price']}}</strong> <span> {{cur}}</span></div>
    <div>Стоимость по trade-in составит <strong>{{report['tradeIn']['priceMin']}}</strong> -
        <strong>{{report['tradeIn']['priceMax']}}</strong>
        <span>USD</span></div>

    <mat-divider class="divider"></mat-divider>


    <div class="report-prices__title">Стоимость данной модели со схожими характеристиками на рынке</div>
    <div class="report-prices">
        <div class="report-prices__item report-prices__item_min">
            <div>
                <div class="report-prices__price">{{report['priceMin']| number:'':'en'}}  {{cur}}</div>
                <div>минимальная</div>
            </div>
        </div>
        <div class="report-prices__item report-prices__item_avg">
            <div>
                <div class="report-prices__price"><span data-currency="price">{{report['priceAvg']| number:'':'en'}}</span>  {{cur}}</div>
                <div>средняя</div>
            </div>
        </div>
        <div class="report-prices__item report-prices__item_max">
            <div>
                <div class="report-prices__price"><span data-currency="price">{{report['priceMax']| number:'':'en'}}</span>  {{cur}}</div>
                <div>максимальная</div>
            </div>
        </div>
    </div>


    <div>Стоимость вашего автомобиля на <strong> {{report['priceDifference'] | percent}} </strong>
        {{(report['price'] < report['priceAvg']) ? 'ниже' : 'выше' | number:'':'en'}}
        среднерыночной</div>
    <div>Средний пробег по рынку составляет <strong> {{report['mileageAvg']| number:'':'en'}} </strong> км</div>
    <div>Количество объявлений о продаже составляет <strong>{{report['carsQuantity']}}</strong> шт</div>

    <ng-container *ngIf="showOldCars">
        <mat-divider class="divider"></mat-divider>

        <mat-accordion class="example-headers-align result__old-cars" multi>
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Список проданных автомобилей за последние <strong>&nbsp;6 месяцев&nbsp;</strong>
                        (<strong>{{report['oldCarsQuantity']}}&nbsp;шт</strong>)
                    </mat-panel-title>
                    <mat-panel-description>

                    </mat-panel-description>
                </mat-expansion-panel-header>

                <div *ngFor="let car of report['oldCars']">
                    <strong>{{report['titleMark']}} {{report['titleModel']}} {{car.year}}</strong>
                    г. с пробегом <strong>{{car.millage| number:'':'en'}}</strong> км за
                    <strong>{{car.price | number:'':'en'}}</strong>
                    {{cur}}
                </div>


            </mat-expansion-panel>
        </mat-accordion>
    </ng-container>


</section>


<ng-template #reportAutoMarket>


    <div class="grid grid_column-3">
        <div>
            <div>Марка: <strong>{{report['titleMark']}}</strong></div>
            <div>Модель: <strong>{{report['titleModel']}}</strong></div>
            <div>Год выпуска: <strong>{{report['year']}}</strong></div>
        </div>
    </div>
    <mat-divider class="divider"></mat-divider>



    <div class="report-prices__title">Стоимость данной модели со схожими характеристиками на рынке</div>
    <div class="report-prices">
        <div class="report-prices__item report-prices__item_min">
            <div>
                <div class="report-prices__price">{{report['priceMin'] | number:'':'en'}} USD</div>
                <div>минимальная</div>
            </div>
        </div>
        <div class="report-prices__item report-prices__item_avg">
            <div>
                <div class="report-prices__price">{{report['priceAvg']| number:'':'en'}} USD</div>
                <div>средняя</div>
            </div>
        </div>
        <div class="report-prices__item report-prices__item_max">
            <div>
                <div class="report-prices__price">{{report['priceMax']| number:'':'en'}} USD</div>
                <div>максимальная</div>
            </div>
        </div>
    </div>


    <div>Средний пробег по рынку составляет <strong>{{report['mileageAvg']| number:'':'en'}}</strong> км</div>
    <div>Количество объявлений о продаже составляет <strong>{{report['carsQuantity']}}</strong> шт</div>
    <div>Количество проданных схожих автомобилей за последние <strong>6</strong> месяцев составляет
        <strong>{{report['oldCarsQuantity']}}</strong> шт:
    </div>

    <ng-container *ngIf="showOldCars">
        <mat-divider class="divider"></mat-divider>

        <mat-accordion class="example-headers-align result__old-cars" multi>
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Список проданных автомобилей за последние <strong>&nbsp;6 месяцев&nbsp;</strong>
                        (<strong>{{report['oldCarsQuantity']}}&nbsp;шт</strong>)
                    </mat-panel-title>
                    <mat-panel-description>

                    </mat-panel-description>
                </mat-expansion-panel-header>

                <div *ngFor="let car of report['oldCars']">
                    <strong>{{report['titleMark']}} {{report['titleModel']}} {{car.year}}</strong>
                    г. с пробегом <strong>{{car.millage| number:'':'en'}}</strong> км за
                    <strong>{{car.price| number:'':'en'}}</strong>
                    USD
                </div>


            </mat-expansion-panel>
        </mat-accordion>
    </ng-container>

</ng-template>

<app-chart></app-chart>